<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Pythonic Harmonies &#8212; Djalgo 0.1-alpha documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css" />
    <script src="_static/documentation_options.js?v=737112c1"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Loops" href="02_loops.html" />
    <link rel="prev" title="Getting started" href="00_getting-started.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="Pythonic-Harmonies">
<h1>Pythonic Harmonies<a class="headerlink" href="#Pythonic-Harmonies" title="Link to this heading">¶</a></h1>
<section id="Preparing-Your-Computer">
<h2>Preparing Your Computer<a class="headerlink" href="#Preparing-Your-Computer" title="Link to this heading">¶</a></h2>
<p>While there’s no shortage of online tutorials explaining how to set up Python on your machine, this guide will simplify the process, focusing on the essentials of starting up with Djalgo, with an introduction to Python and how to use it as a tool for music composition.</p>
<section id="Leveraging-Cloud-Computing">
<h3>Leveraging Cloud Computing<a class="headerlink" href="#Leveraging-Cloud-Computing" title="Link to this heading">¶</a></h3>
<p>Your web browser and a service provider can be your music composing tool. Navigate to a cloud computing service, sign up for a free plan, and you’re a couple of steps away from being a music coder. Platforms like Deepnote and Google Colab let you write code, display musical scores, and play MIDI files directly from a notebook-style interface. Bear in mind, though, that free plans generally come with service-specific limitations. While processor and RAM limitations won’t hinder simple music
composition methods, more advanced techniques like machine learning-based ones could experience a slower workflow. In any case, opening your pockets to a service you love can be rewarding, or course for your service provider, but also for you.</p>
<p>Despite these limitations, Deepnote’s default computing environments, and to a lesser extent Colab’s, both come with a range of handy data science tools, although you will need to install a specific application and a few Python packages at the beginning of each session.</p>
<p>Deepnote and Colab both work on the background with Debian Linux containers. To access to the system, you just add a <code class="docutils literal notranslate"><span class="pre">!</span></code> before the command. For instance, you’ll have to access to the system to install MuseScore, an application supported in this book for visualizing musical scores created with the Music21 Python package. The first line of code in each session should thus be <code class="docutils literal notranslate"><span class="pre">!apt</span> <span class="pre">update</span></code>, a command instructing Debian to fetch the list of packages installed in the Linux environment and those
available for installation. Subsequently, <code class="docutils literal notranslate"><span class="pre">!apt</span> <span class="pre">install</span> <span class="pre">musescore</span> <span class="pre">-y</span></code> proceeds with the installation of Musescore, with the <code class="docutils literal notranslate"><span class="pre">-y</span></code> argument acting as a confirmation for the installation.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>!apt update
!apt install musescore -y
</pre></div>
</div>
<p>Utilizing the command <code class="docutils literal notranslate"><span class="pre">!pip</span> <span class="pre">install</span> <span class="pre">&lt;package&gt;</span></code>, you can install any Python package of your choice, no separate installation confirmation needed with <code class="docutils literal notranslate"><span class="pre">pip</span></code>. For instance, if you’re keen on incorporating the Music21 package, as well as Djalgo, execute the following command.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>!pip install music21 git+https://github.com/essicolo/djalgo.git
from music21 import environment
environment.set(&quot;musescoreDirectPNGPath&quot;, &quot;/usr/bin/musescore&quot;)
</pre></div>
</div>
<p>Then you can start harmonizing with Python. Or maybe you’ll prefer installing everything on your machine?</p>
</section>
<section id="Machine-Setup-Instructions">
<h3>Machine Setup Instructions<a class="headerlink" href="#Machine-Setup-Instructions" title="Link to this heading">¶</a></h3>
<p>For this book, I recommend installing a Python release from the Python Foundation, available at python.org, version 3.11 or higher. However, other Python distributions like Anaconda and Miniforge could also suffice.</p>
<p>On <strong>Windows</strong>, once you have completed downloading the python-.exe file, simply double-click on the downloaded .exe file to start the installation process. Be sure to <strong>check the box that says “Add Python 3.x to PATH”</strong> at the bottom of the first installation screen to ensure that Python is added to your system’s environment variables. This action allows Python to be run from any command prompt.</p>
<p>On <strong>macOS</strong>, Python can be installed either from the .pkg file or using <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">python</span></code> if you are a Homebrew user.</p>
<p>On <strong>Linux</strong>, Python should already be installed and accessible from the terminal.</p>
<p>To test if your installation was successful, open the Command Prompt on Windows (search for “cmd” in the Windows search bar) or a terminal on macOS and Linux, and then type <code class="docutils literal notranslate"><span class="pre">python3</span></code>. A command prompt with <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code> should appear. Enter <code class="docutils literal notranslate"><span class="pre">2+2</span></code>, and, well… you know what to expect (pro-tip, <a class="reference external" href="https://en.wikipedia.org/wiki/2_%2B_2_%3D_5">not 5</a>!). To exit Python, type <code class="docutils literal notranslate"><span class="pre">quit()</span></code>.</p>
<p>To keep your workflow organized and reusable, you should create a virtual environment for each project you work on. The definition of a project, whether it encompasses everything related to music or pertains to a specific piece you are working on, is up to you. Personally, I create a virtual environment named “music” and compose from there. A virtual environment isolates a Python installation in a set of files, including a Python executable and the installed packages. You can delete a virtual
environment by simply removing these files. If you need to recreate the virtual environment, all you need is the requirements.txt file, which lists all the necessary components to rebuild the environment. To create virtual environments, you must first install the Virtualenv package by running <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">virtualenv</span></code> in a terminal (not in a Python command prompt). <code class="docutils literal notranslate"><span class="pre">pip</span></code> is the default package manager for Python.</p>
<p>Once Virtualenv is installed, create a new environment in your chosen folder. This could be a dedicated folder for all your environments, or a virtual-environment folder within your project directory. To navigate to this folder in a terminal, type <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">path/to/location</span></code>, where <code class="docutils literal notranslate"><span class="pre">cd</span></code> stands for change directory. Then, create your environment there with <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-m</span> <span class="pre">venv</span> <span class="pre">music</span></code>, where <code class="docutils literal notranslate"><span class="pre">music</span></code> is the name you assign to your environment. To activate the environment, type
<code class="docutils literal notranslate"><span class="pre">.\pythonic-harmonies-venv\Scripts\activate</span></code> on Windows, or on macOS or Linux, type <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">pythonic-harmonies-venv/bin/activate</span></code>. From there, install the necessary packages by typing <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">jupyterlab</span> <span class="pre">music21</span> <span class="pre">git+https://github.com/essicolo/djalgo.git</span></code>.</p>
<p>The Djalgo package contains the dependencies needed to follow the book. The JupyterLab package provides a very convenient way to interact with your code: litterate programming.</p>
</section>
<section id="Litterate-programming">
<h3>Litterate programming<a class="headerlink" href="#Litterate-programming" title="Link to this heading">¶</a></h3>
<p>Literate programming emphasizes writing code between cells of text. This approach contrasts with the traditional code-centric perspective and aims to make code more understandable, and therefore, more reliable. Deepnote and Google Colab both adopt literate programing approaches, where each file is called a notebook. You can locally work on a similar interface with JupyterLab. Jupyter supports many programming languages, including Python.</p>
<p>JupyterLab offers a flexible and powerful environment for working with notebooks. Once installed, JupyterLab can be launched by simply typing <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code> in your terminal or command prompt, then the interface should pop up in your default browser. The interface provides an integrated environment where you can write code, view outputs, and add narrative text, images, tables and equations seamlessly. JupyterLab is designed to be extensible and modular, with features such as drag-and-drop
cells, integrated data viewers, and tools for file management and version control. Additionally, a Jupyter-like interface can be loaded within the Visual Studio Code app by installing the Python extension.</p>
<p>Jupyter uses <em>kernels</em> to link the interface to the computing environment. Kernels are independant from Python virtual environments. A Python kernel can be installed from the Python virtual environment if the IPython and the IPykernel packages are installed. Open a terminal, activate your Python environment, then type <code class="docutils literal notranslate"><span class="pre">ipython</span> <span class="pre">kernel</span> <span class="pre">install</span> <span class="pre">--user</span> <span class="pre">--name=&lt;name&gt;</span></code> to create a new kernel named with a string that replaces <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code>. On Linux, kernels should be stored in the folder
<code class="docutils literal notranslate"><span class="pre">.local/share/jupyter/kernels/</span></code> from you user directory. On macOS, they should stand in <code class="docutils literal notranslate"><span class="pre">/Users/you/Library/Jupyter</span></code>. On Windows, you should find them in <code class="docutils literal notranslate"><span class="pre">%APPDATA%\jupyter\kernels\</span></code>. To list you kernels, you can run <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">kernelspec</span> <span class="pre">list</span></code>. To delete them, you can either throw the folder in the bin or run <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">kernelspec</span> <span class="pre">remove</span> <span class="pre">&lt;name&gt;</span></code>. Users can select which kernel to use for each notebook via the kernel selection option in the notebook interface.</p>
</section>
</section>
<section id="Python-basics">
<h2>Python basics<a class="headerlink" href="#Python-basics" title="Link to this heading">¶</a></h2>
<p>object assignment, Lists, tuples, append for loops</p>
<section id="Lists-in-First-Class">
<h3>Lists in First Class<a class="headerlink" href="#Lists-in-First-Class" title="Link to this heading">¶</a></h3>
<p>We will cover three ways of working with music files in Python:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://web.mit.edu/music21/">Music21</a> is dedicated to music theory and notation</p></li>
<li><p><a class="reference external" href="https://craffel.github.io/pretty-midi/">Pretty-Midi</a> is made to interact with MIDI files</p></li>
<li><p><a class="reference external" href="http://scamp.marcevanstein.com/">SCAMP</a> is designed to create sound</p></li>
</ul>
<p>Although I will favor Music21 on this site, most operations can alternatively be done in Pretty-Midi and SCAMP. This is because most of Djalgo’s outputs are lists, a simple and powerful way to store sequential information in Python. The content of a Python list is defined in square brackets, and each item is separated with a comma. In the next code cell, I assign a list to a variable.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;crocodile&#39;</span><span class="p">]</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, &#39;a&#39;, 10, &#39;crocodile&#39;]
</pre></div></div>
</div>
</section>
<section id="Music-as-a-signal-of-information">
<h3>Music as a signal of information<a class="headerlink" href="#Music-as-a-signal-of-information" title="Link to this heading">¶</a></h3>
<p>Djalgo is not about sound, but music. Sounds are very complex signals that can be generated from musical specifications such as notes. A note, at its most essential information, is a combinaision of a pitch, a duration, and when it starts in time. Another way of defining a note is its pitch, its start time and its end time. Since end time is start time plus duration, and duration is end time minus start time, both approaches contain the same information.</p>
<p>Djalgo numerically considers notes as (pitch, duration, offset) tuples. Pitches are expressed as MIDI notes, a highly normed and complex way for music encoding, which spans from 0, corresponding to C2 (8.178 Hz), to 127, corresponding to G9 (12543.854 Hz). Durations, as well as offsets, or start times, are expressed in any unit desired, but quarter lenghts should be used. A quarter length is the duration of a metronome tick. The metronome tick oscillates in beats per minute, a speed that allows
quarter lengths to be placed in time.</p>
<p>In Python, tuples are immmutable lists. The tuple <code class="docutils literal notranslate"><span class="pre">(72,</span> <span class="pre">2.0,</span> <span class="pre">1.0)</span></code> defines a note with pitch C4 with a duration of two quarter lengths starting at 1.0 quarter length from thew begining of the track. Pitches defined by <code class="docutils literal notranslate"><span class="pre">None</span></code> are rests.</p>
<p>A rhythm, or rhythmic pattern, is a note without pitch. It is defined with a tuple of <code class="docutils literal notranslate"><span class="pre">(duration,</span> <span class="pre">offset)</span></code>. A track is a sequence of notes stored in a list. And multiple tracks form a piece, which becomes a list of lists.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">twinkle_1</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>  <span class="c1"># C (twin)</span>
    <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>  <span class="c1"># C (kle)</span>
    <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span>  <span class="c1"># G (twin)</span>
    <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">),</span>  <span class="c1"># G (kle)</span>
    <span class="p">(</span><span class="mi">69</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">),</span>  <span class="c1"># A (lit)</span>
    <span class="p">(</span><span class="mi">69</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">),</span>  <span class="c1"># A (tle)</span>
    <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">)</span>  <span class="c1"># G (star)</span>
<span class="p">]</span>

<span class="n">twinkle_2</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">),</span>  <span class="c1"># F (how)</span>
    <span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">),</span>  <span class="c1"># F (I)</span>
    <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">),</span> <span class="c1"># E (won)</span>
    <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">11.0</span><span class="p">),</span> <span class="c1"># E (der)</span>
    <span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">),</span> <span class="c1"># D (what)</span>
    <span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">13.0</span><span class="p">),</span> <span class="c1"># D (you)</span>
    <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">14.0</span><span class="p">)</span>  <span class="c1"># C (are)</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p>To merge two lists horizontally, i.e. in the time direction, you can use the <code class="docutils literal notranslate"><span class="pre">+</span></code>opetator.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">twinkle</span> <span class="o">=</span> <span class="n">twinkle_1</span> <span class="o">+</span> <span class="n">twinkle_2</span>
<span class="n">twinkle</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[(60, 1.0, 0.0),
 (60, 1.0, 1.0),
 (67, 1.0, 2.0),
 (67, 1.0, 3.0),
 (69, 1.0, 4.0),
 (69, 1.0, 5.0),
 (67, 2.0, 6.0),
 (65, 1.0, 8.0),
 (65, 1.0, 9.0),
 (64, 1.0, 10.0),
 (64, 1.0, 11.0),
 (62, 1.0, 12.0),
 (62, 1.0, 13.0),
 (60, 2.0, 14.0)]
</pre></div></div>
</div>
<p>To stack them vertically, to create two tracks, you can put them into a list.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">twinkle</span> <span class="o">=</span> <span class="p">[</span><span class="n">twinkle_1</span><span class="p">,</span> <span class="n">twinkle_2</span><span class="p">]</span>
<span class="n">twinkle</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[(60, 1.0, 0.0),
  (60, 1.0, 1.0),
  (67, 1.0, 2.0),
  (67, 1.0, 3.0),
  (69, 1.0, 4.0),
  (69, 1.0, 5.0),
  (67, 2.0, 6.0)],
 [(65, 1.0, 8.0),
  (65, 1.0, 9.0),
  (64, 1.0, 10.0),
  (64, 1.0, 11.0),
  (62, 1.0, 12.0),
  (62, 1.0, 13.0),
  (60, 2.0, 14.0)]]
</pre></div></div>
</div>
</section>
</section>
<section id="Leverage-Djalgo-for-music-composition">
<h2>Leverage Djalgo for music composition<a class="headerlink" href="#Leverage-Djalgo-for-music-composition" title="Link to this heading">¶</a></h2>
<section id="Scales">
<h3>Scales<a class="headerlink" href="#Scales" title="Link to this heading">¶</a></h3>
<p>We haven’t used Djalgo yet. We just played with basic Python where I wrote the song <em>Twinkle, Twinkle Little Star</em> in C-major. C-major is a scale, i.e. a subset of the chromatic scale (all pitches) designed to fit together. Djalgo can generate pitch lists allowed for a given scale. We’ll need to load Djalgo in our session to access to its functionnalities. I use the alias <code class="docutils literal notranslate"><span class="pre">dj</span></code> to make the code shorter.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">djalgo</span> <span class="k">as</span> <span class="nn">dj</span>
</pre></div>
</div>
</div>
<p>Scales are accessible from the <em>harmony</em> module. You have to define the tonic and the type, then <code class="docutils literal notranslate"><span class="pre">.generate()</span></code> will process the scale, returning all available MIDI pitches in the scale. The <code class="docutils literal notranslate"><span class="pre">object.method()</span></code> way of programming (object-oriented programming) is just like defining a frog and make it jump, as</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>frog = animal(order=&#39;anura&#39;)
frog.jump()
</pre></div>
</div>
<p>In the f</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c_major</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">tonic</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="n">scale_type</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c_major</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[0, 2, 4, 5, 7, 9, 11, 12, 14, 16, 17, 19, 21, 23, 24, 26, 28, 29, 31, 33, 35, 36, 38, 40, 41, 43, 45, 47, 48, 50, 52, 53, 55, 57, 59, 60, 62, 64, 65, 67, 69, 71, 72, 74, 76, 77, 79, 81, 83, 84, 86, 88, 89, 91, 93, 95, 96, 98, 100, 101, 103, 105, 107, 108, 110, 112, 113, 115, 117, 119, 120, 122, 124, 125, 127]
</pre></div></div>
</div>
<p>Scales are defined as intervals from the chromatic scale. You might have heard that a major scale is <em>whole-step, whole-step, half-step, whole-step, whole-step, whole-step, half-step</em>. In Python, from a list of 12 pitches in the chromatic scale, you would take the first pitch (index 0), the third (index 2), and so on. Djalgo predefines the major scale, the minor, diminished, pentatonic and so on.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Scale</span><span class="o">.</span><span class="n">scale_intervals</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;major&#39;: [0, 2, 4, 5, 7, 9, 11], &#39;minor&#39;: [0, 2, 3, 5, 7, 8, 10], &#39;diminished&#39;: [0, 2, 3, 5, 6, 8, 9, 11], &#39;major pentatonic&#39;: [0, 2, 4, 7, 9], &#39;minor pentatonic&#39;: [0, 3, 5, 7, 10], &#39;chromatic&#39;: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], &#39;lydian&#39;: [0, 2, 4, 6, 7, 9, 11], &#39;mixolydian&#39;: [0, 2, 4, 5, 7, 9, 10], &#39;dorian&#39;: [0, 2, 3, 5, 7, 9, 10], &#39;phrygian&#39;: [0, 1, 3, 5, 7, 8, 10], &#39;locrian&#39;: [0, 1, 3, 5, 6, 8, 10], &#39;harmonic minor&#39;: [0, 2, 3, 5, 7, 8, 11], &#39;melodic minor ascending&#39;: [0, 2, 3, 5, 7, 9, 11], &#39;melodic minor descending&#39;: [0, 2, 3, 5, 7, 8, 10]}
</pre></div></div>
</div>
<p>As any list, you can extract a subset by index. In Python, <code class="docutils literal notranslate"><span class="pre">c_major[35:43]</span></code> means you aim at extracting index 35 to <em>excluding</em> index 43, i.e. indexes 35 to 42. The resulting list is C4 to C5.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c_major_sub</span> <span class="o">=</span> <span class="n">c_major</span><span class="p">[</span><span class="mi">35</span><span class="p">:</span><span class="mi">43</span><span class="p">]</span> <span class="c1"># C4 to C5</span>
<span class="n">c_major_sub</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[60, 62, 64, 65, 67, 69, 71, 72]
</pre></div></div>
</div>
<p>To convert a list of pitches to the Djalgo notation, we could use afor loop. The explainations are in code comments, which are placed after the <code class="docutils literal notranslate"><span class="pre">#</span></code> sign.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initialize an empty list to store the notes</span>
<span class="n">c_major_sub_notes</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Initialize the offset, the first being 0</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Iterate over the pitches in the scale subset we assigned earlier</span>
<span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">c_major_sub</span><span class="p">:</span>
    <span class="c1"># Append the pitch, duration, and offset to the notes list</span>
    <span class="n">c_major_sub_notes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pitch</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">offset</span><span class="p">))</span>
    <span class="c1"># Increment the offset by 1</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="n">c_major_sub_notes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[(60, 1, 0), (62, 1, 1), (64, 1, 2), (65, 1, 3), (67, 1, 4), (69, 1, 5), (71, 1, 6), (72, 1, 7)]
</pre></div></div>
</div>
<p>We now have a track, and can convert it to a Music21 object with the conversion utility, then render it with Music21’s <code class="docutils literal notranslate"><span class="pre">.show()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">c_major_sub_notes</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_23_0.png" class="no-scaled-link" src="_images/01_musical_23_0.png" style="width: 697px; height: 49px;" />
</div>
</div>
</section>
<section id="Chords">
<h3>Chords<a class="headerlink" href="#Chords" title="Link to this heading">¶</a></h3>
<p>A chord is multiple pitches played together, generally three. In Djalgo, chords are written as a list of pitches in the note format.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c_major_chord</span> <span class="o">=</span> <span class="p">([</span><span class="mi">60</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">67</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">([</span><span class="n">c_major_chord</span><span class="p">],</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_25_0.png" class="no-scaled-link" src="_images/01_musical_25_0.png" style="width: 119px; height: 49px;" />
</div>
</div>
<div class="tip docutils container">
<p>The <code class="docutils literal notranslate"><span class="pre">.show()</span></code> method renders a score by default, but you have access to other rendering options, such as <code class="docutils literal notranslate"><span class="pre">.show('midi')</span></code>.</p>
</div>
</section>
<section id="Ornaments">
<h3>Ornaments<a class="headerlink" href="#Ornaments" title="Link to this heading">¶</a></h3>
<p>We used the Djalgo package, but still haven’t seen how it can help to generate music. Let’s start with ornaments, which alter a list of notes to create a richer score. Djalgo has six types of ornaments: grace note, trill, mordent, arpeggio, turn and slide.</p>
<p><strong>Grace note</strong> adds a note randomly drawned from the list given in <code class="docutils literal notranslate"><span class="pre">grace_pitches</span></code> at the place given by <code class="docutils literal notranslate"><span class="pre">note_index</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ornam</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Ornament</span><span class="p">(</span>
    <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;grace_note&#39;</span><span class="p">,</span>
    <span class="n">grace_note_type</span><span class="o">=</span><span class="s1">&#39;appoggiatura&#39;</span><span class="p">,</span>
    <span class="n">grace_pitches</span><span class="o">=</span><span class="p">[</span><span class="mi">72</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
    <span class="n">notes</span><span class="o">=</span><span class="n">c_major_sub_notes</span><span class="p">,</span>
    <span class="n">note_index</span><span class="o">=</span><span class="mi">4</span>
<span class="p">)</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">ornam</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_29_0.png" class="no-scaled-link" src="_images/01_musical_29_0.png" style="width: 697px; height: 49px;" />
</div>
</div>
<p><strong>Trill</strong> gets the degree given by <code class="docutils literal notranslate"><span class="pre">by</span></code> from the note at <code class="docutils literal notranslate"><span class="pre">note_index</span></code> and oscillates at rate of <code class="docutils literal notranslate"><span class="pre">trill_rate</span></code> between the note and its degree.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ornam</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Ornament</span><span class="p">(</span>
    <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;trill&#39;</span><span class="p">,</span>
    <span class="n">trill_rate</span><span class="o">=</span><span class="mf">0.125</span><span class="p">,</span>
    <span class="n">by</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">tonic</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span>
    <span class="n">scale_type</span><span class="o">=</span><span class="s1">&#39;major&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
    <span class="n">notes</span><span class="o">=</span><span class="n">c_major_sub_notes</span><span class="p">,</span>
    <span class="n">note_index</span><span class="o">=</span><span class="mi">4</span>
<span class="p">)</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">ornam</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_31_0.png" class="no-scaled-link" src="_images/01_musical_31_0.png" style="width: 697px; height: 49px;" />
</div>
</div>
<p><strong>Mordent</strong> rapidly alternates between the original pitch and one step defined <code class="docutils literal notranslate"><span class="pre">by</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ornam</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Ornament</span><span class="p">(</span>
    <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;mordent&#39;</span><span class="p">,</span>
    <span class="n">by</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">tonic</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span>
    <span class="n">scale_type</span><span class="o">=</span><span class="s1">&#39;major&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
    <span class="n">notes</span><span class="o">=</span><span class="n">c_major_sub_notes</span><span class="p">,</span>
    <span class="n">note_index</span><span class="o">=</span><span class="mi">4</span>
<span class="p">)</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">ornam</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_33_0.png" class="no-scaled-link" src="_images/01_musical_33_0.png" style="width: 697px; height: 54px;" />
</div>
</div>
<p><strong>Arpeggio</strong> transforms a note to an arpeggio given by a list of degrees.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ornam</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Ornament</span><span class="p">(</span>
    <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;arpeggio&#39;</span><span class="p">,</span>
    <span class="n">tonic</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span>
    <span class="n">scale_type</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span>
    <span class="n">arpeggio_degrees</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
    <span class="n">notes</span><span class="o">=</span><span class="n">c_major_sub_notes</span><span class="p">,</span>
    <span class="n">note_index</span><span class="o">=</span><span class="mi">4</span>
<span class="p">)</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">ornam</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_35_0.png" class="no-scaled-link" src="_images/01_musical_35_0.png" style="width: 697px; height: 53px;" />
</div>
</div>
<p><strong>Turn</strong> is a transition of four notes betweem <code class="docutils literal notranslate"><span class="pre">note_index</span></code> and the next note.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ornam</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Ornament</span><span class="p">(</span>
    <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;turn&#39;</span><span class="p">,</span>
    <span class="n">tonic</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span>
    <span class="n">scale_type</span><span class="o">=</span><span class="s1">&#39;major&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
    <span class="n">notes</span><span class="o">=</span><span class="n">c_major_sub_notes</span><span class="p">,</span>
    <span class="n">note_index</span><span class="o">=</span><span class="mi">4</span>
<span class="p">)</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">ornam</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_37_0.png" class="no-scaled-link" src="_images/01_musical_37_0.png" style="width: 697px; height: 49px;" />
</div>
</div>
<p><strong>Silde</strong> is a glissando. However, in Djalgo, glissandos should be defined at the instrument level with your prefered package (<code class="docutils literal notranslate"><span class="pre">Instrument</span></code> in Pretty-midi and <code class="docutils literal notranslate"><span class="pre">Stream</span></code> in Music21). Instead of sliding, slide in djalgo transits on the chromatic scale from a note to the next.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ornam</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Ornament</span><span class="p">(</span>
    <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;slide&#39;</span><span class="p">,</span>
    <span class="n">slide_length</span><span class="o">=</span><span class="mi">6</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
    <span class="n">notes</span><span class="o">=</span><span class="p">[(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">72</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)],</span>
    <span class="n">note_index</span><span class="o">=</span><span class="mi">0</span>
<span class="p">)</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">ornam</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_39_0.png" class="no-scaled-link" src="_images/01_musical_39_0.png" style="width: 172px; height: 55px;" />
</div>
</div>
</section>
<section id="Voice">
<h3>Voice<a class="headerlink" href="#Voice" title="Link to this heading">¶</a></h3>
<p>Voicing creates chords from pitch lists. These are just lists, but iterating through them can generate either chords and arpeggios.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pitch_chords</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span>
    <span class="n">tonic</span> <span class="o">=</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span>
    <span class="n">scale_type</span> <span class="o">=</span> <span class="s1">&#39;major&#39;</span><span class="p">,</span>
    <span class="n">degrees</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="c1"># triads</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">pitches</span><span class="o">=</span><span class="n">c_major_sub</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pitch_chords</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[60, 64, 67], [62, 65, 69], [64, 67, 71], [65, 69, 72], [67, 71, 74], [69, 72, 76], [71, 74, 77], [72, 76, 79]]
</pre></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pitch_chords</span></code> object contains only pitches. To create a track, we must also have durations and offsets. We could reuse the loop written earlier.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c_major_sub_notes_chordified</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">chord</span> <span class="ow">in</span> <span class="n">pitch_chords</span><span class="p">:</span>
    <span class="n">c_major_sub_notes_chordified</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">chord</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">offset</span><span class="p">))</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">c_major_sub_notes_chordified</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_43_0.png" class="no-scaled-link" src="_images/01_musical_43_0.png" style="width: 697px; height: 49px;" />
</div>
</div>
</section>
<section id="Progression">
<h3>Progression<a class="headerlink" href="#Progression" title="Link to this heading">¶</a></h3>
<p>Ever heard of the circle of fifths? It can be used to create progressions with chords that fit together. Why not using it to generate random progressions from different circles, the circle of fifths (<code class="docutils literal notranslate"><span class="pre">'P5'</span></code>) being the most popular. The radius argument is the spread of the chords in the circle across [major chords, minor chords, diminished chords], usually <code class="docutils literal notranslate"><span class="pre">[3,</span> <span class="pre">3,</span> <span class="pre">1]</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">progression</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Progression</span><span class="p">(</span>
    <span class="n">tonic_pitch</span><span class="o">=</span><span class="s1">&#39;D3&#39;</span><span class="p">,</span>
    <span class="n">circle_of</span><span class="o">=</span><span class="s1">&#39;P5&#39;</span><span class="p">,</span>
    <span class="n">radius</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># a seed is any random integer that allows you to reproduce the same outcomes from arandom process</span>
<span class="n">progression_notes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">chord</span> <span class="ow">in</span> <span class="n">progression</span><span class="p">:</span>
    <span class="n">progression_notes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">chord</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">offset</span><span class="p">))</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">progression_notes</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_45_0.png" class="no-scaled-link" src="_images/01_musical_45_0.png" style="width: 697px; height: 57px;" />
</div>
</div>
</section>
<section id="Rhythms">
<h3>Rhythms<a class="headerlink" href="#Rhythms" title="Link to this heading">¶</a></h3>
<p>For now, all note durations was set to 1 quarter length, and offsets were set accordingly. A combination of durations and offsets is called a rhythm in Djalgo. Rhythms can be set by hand, but to leverage Djalgo, we can generate them randomly. The <code class="docutils literal notranslate"><span class="pre">random</span></code> method from the <code class="docutils literal notranslate"><span class="pre">rhythm</span></code> module draws numbers from a <code class="docutils literal notranslate"><span class="pre">durations</span></code> list until they sum up to the <code class="docutils literal notranslate"><span class="pre">measure_length</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">random_rhythm</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">rhythm</span><span class="o">.</span><span class="n">Rhythm</span><span class="p">(</span>
    <span class="n">measure_length</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">durations</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">random_rhythm</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[(0.5, 0.0),
 (0.5, 0.5),
 (2, 1.0),
 (2, 3.0),
 (0.5, 5.0),
 (1, 5.5),
 (0.5, 6.5),
 (1, 7.0)]
</pre></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">darwin</span></code> method uses a genetic algorithm to obtain similar results, but with a more elegant algorithm behind.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">darwin_rhythm</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">rhythm</span><span class="o">.</span><span class="n">Rhythm</span><span class="p">(</span>
    <span class="n">measure_length</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">durations</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">darwin_rhythm</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[(1, 0.0),
 (2, 1.0),
 (0.5, 3.0),
 (1, 3.5),
 (2, 4.5),
 (0.5, 6.5),
 (0.5, 7.0),
 (0.5, 7.5)]
</pre></div></div>
</div>
<p>A random progression of the same length can be generated (<code class="docutils literal notranslate"><span class="pre">len(a)</span></code> take the length of the list <code class="docutils literal notranslate"><span class="pre">a</span></code>), mapped to the rhythm, and transformed to a Music21 stream to create a score or a midi.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">progression</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Progression</span><span class="p">(</span>
    <span class="n">tonic_pitch</span><span class="o">=</span><span class="s1">&#39;C3&#39;</span><span class="p">,</span>
    <span class="n">circle_of</span><span class="o">=</span><span class="s1">&#39;P5&#39;</span><span class="p">,</span>
    <span class="n">radius</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">darwin_rhythm</span><span class="p">),</span> <span class="n">seed</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">random_progression</span> <span class="o">=</span> <span class="p">[(</span><span class="n">p</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">progression</span><span class="p">,</span> <span class="n">darwin_rhythm</span><span class="p">)]</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">to_music21</span><span class="p">(</span><span class="n">random_progression</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_51_0.png" class="no-scaled-link" src="_images/01_musical_51_0.png" style="width: 697px; height: 59px;" />
</div>
</div>
</section>
</section>
<section id="Wrap-up">
<h2>Wrap up<a class="headerlink" href="#Wrap-up" title="Link to this heading">¶</a></h2>
<p>Let’s take our twinkle song.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">twinkle</span> <span class="o">=</span> <span class="n">twinkle_1</span> <span class="o">+</span> <span class="n">twinkle_2</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">to_music21</span><span class="p">(</span><span class="n">twinkle</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_53_0.png" class="no-scaled-link" src="_images/01_musical_53_0.png" style="width: 697px; height: 49px;" />
</div>
</div>
<p>We will add a voice to index 0 and index 7.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">twinkle_pitches</span> <span class="o">=</span> <span class="p">[</span><span class="n">note</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">twinkle</span><span class="p">]</span>
<span class="n">twinkle_chords</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Voice</span><span class="p">(</span>
    <span class="n">tonic</span> <span class="o">=</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span>
    <span class="n">scale_type</span> <span class="o">=</span> <span class="s1">&#39;major&#39;</span><span class="p">,</span>
    <span class="n">degrees</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="c1"># triads</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">pitches</span><span class="o">=</span><span class="n">twinkle_pitches</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">]:</span>
    <span class="n">twinkle</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">twinkle_chords</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">twinkle</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">twinkle</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">to_music21</span><span class="p">(</span><span class="n">twinkle</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_55_0.png" class="no-scaled-link" src="_images/01_musical_55_0.png" style="width: 697px; height: 49px;" />
</div>
</div>
<p>Some ornaments…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">twinkle</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Ornament</span><span class="p">(</span>
    <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;grace_note&#39;</span><span class="p">,</span>
    <span class="n">grace_note_type</span><span class="o">=</span><span class="s1">&#39;acciaccatura&#39;</span><span class="p">,</span>
    <span class="n">grace_pitches</span><span class="o">=</span><span class="p">[</span><span class="mi">72</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
    <span class="n">notes</span><span class="o">=</span><span class="n">twinkle</span><span class="p">,</span>
    <span class="n">note_index</span><span class="o">=</span><span class="mi">11</span>
<span class="p">)</span>

<span class="n">twinkle</span> <span class="o">=</span> <span class="n">dj</span><span class="o">.</span><span class="n">harmony</span><span class="o">.</span><span class="n">Ornament</span><span class="p">(</span>
    <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;trill&#39;</span><span class="p">,</span>
    <span class="n">trill_rate</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
    <span class="n">by</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">tonic</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span>
    <span class="n">scale_type</span><span class="o">=</span><span class="s1">&#39;major&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
    <span class="n">notes</span><span class="o">=</span><span class="n">twinkle</span><span class="p">,</span>
    <span class="n">note_index</span><span class="o">=</span><span class="mi">6</span>
<span class="p">)</span>
<span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">twinkle</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/01_musical_57_0.png" class="no-scaled-link" src="_images/01_musical_57_0.png" style="width: 697px; height: 58px;" />
</div>
</div>
<p>And let’s hear our masterpiece!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dj</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">twinkle</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;music21&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;midi&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div id="midiPlayerDiv2071"></div>
<link rel="stylesheet" href="https://cuthbertLab.github.io/music21j/css/m21.css">

<script
src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
></script>

<script>
function midiPlayerDiv2071_play() {
    const rq = require.config({
        paths: {
            'music21': 'https://cuthbertLab.github.io/music21j/releases/music21.debug',
        }
    });
    rq(['music21'], function(music21) {
        mp = new music21.miditools.MidiPlayer();
        mp.addPlayer("#midiPlayerDiv2071");
        mp.base64Load("data:audio/midi;base64,TVRoZAAAAAYAAQACJ2BNVHJrAAAAFAD/UQMHoSAA/1gEBAIYCM5g/y8ATVRyawAAAPUA/wMAAOAAQM5gkDxaAJBAWgCQQ1rOYIA8AACAQAAAgEMAAJA8Ws5ggDwAAJBDWs5ggEMAAJBDWs5ggEMAAJBFWs5ggEUAAJBFWs5ggEUAAJBDWpNYgEMAAJBFWpNYgEUAAJBDWpNYgEMAAJBFWpNYgEUAAJBDWpNYgEMAAJBFWpNYgEUAAJBDWpNYgEMAAJBFWpNYgEUAAJBBWgCQRVoAkEhazmCAQQAAgEUAAIBIAACQQVrOYIBBAACQQFrOYIBAAACQQFrOYIBAAACQSFqJbIBIAACQPlrOYIA+AACQPlrOYIA+AACQPFqBnUCAPADOYP8vAA==");
    });
}
if (typeof require === 'undefined') {
    setTimeout(midiPlayerDiv2071_play, 2000);
} else {
    midiPlayerDiv2071_play();
}
</script></div>
</div>
<p>↳ To <a class="reference external" href="02_loops.html">Loops</a></p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="00_getting-started.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pythonic Harmonies</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_loops.html">Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><div>
<br/>
<a href="https://www.buymeacoffee.com/essicolo">☕ Buy me a coffee</a>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Essi Parent.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/01_musical.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>